!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return $.ajax({type:"Get",url:e,dataType:"json",success:function(e){localStorage.setItem(t,JSON.stringify(e))},error:function(e){console.log(e)}})}function o(e){var t=localStorage.getItem(e);return null!==t?JSON.parse(t):null}function u(e,t){localStorage.setItem(e,JSON.stringify(t))}function a(e){return e.map((function(e){return e.ID})).reduce((function(e,t){return Math.max(e,t)}),0)+1}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o("line-data");if(null!==n){var r=n.filter((function(t){return t.specialist_id===e}));if(r.length>0){var i=o("line-clients");if(null!==i)return i.filter((function(e){return-1!==r.findIndex((function(t){return t.client_id===e.ID}))&&e.serviced===t}))}}return[]}function l(e){var t,n,r,i,c=o("line-specialists").find((function(t){return t.ID===e}));void 0!==c&&function(e,t){var n=o("line-data"),r=a(n);n.push({ID:r,client_id:e,specialist_id:t}),u("line-data",n)}((t=o("line-clients"),n=t.map((function(e){return e.number})).reduce((function(e,t){return Math.max(e,t)}),0)+1,r=a(t),i=(new Date).getTime(),t.push({ID:r,number:n,createdAt:i,serviced:!1}),u("line-clients",t),r),c.ID)}function d(e){var t=o("line-clients"),n=t.findIndex((function(t){return t.ID===e}));-1!==n&&(t[n].serviced=!0,t[n].endedAt=(new Date).getTime(),u("line-clients",t))}function f(){var e=(new Date).getTime();u("line-clients",o("line-clients").map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{createdAt:e,serviced:!1})})))}function p(e){var t=s(e,!0),n=t.reduce((function(e,t){return void 0!==t.endedAt?e+(t.endedAt-t.createdAt):e}),0)/t.length;return Number.isNaN(n)?0:Math.round(n)}function b(e){var t=o("line-clients").find((function(t){return t.number===e}));if(void 0!==t){var n=o("line-data").find((function(e){return e.client_id===t.ID}));if(void 0!==n){var r=p(n.specialist_id),i=s(n.specialist_id).sort((function(e,t){return e.number-t.number})).findIndex((function(e){return e.ID===t.ID}));if(-1!==i)return r*i}}return 0}n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return b}))},function(e,t,n){"use strict";function r(){var e=localStorage.getItem("line-specialists"),t=$("#specialists-dropdown");null!==e&&($.each(JSON.parse(e),(function(e,n){t.append($('<a class="dropdown-item js-specialists-dropdown cursor-pointer" href="#" data-value='.concat(n.ID,">").concat(n.specialist,"</a>")))})),t.removeClass("d-none"))}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=r>0?Math.round(r/1e3/60):0,c=i>0?"(apytikslis laukimo laikas: ".concat(i,"min.)"):"",o="<td ".concat(t?'class="bg-success"':"",">").concat(e.number," ").concat(c,"</td>"),u=n?'<td><button type="button" class="btn btn-success w-25 p-3 js-servised" data-value='.concat(e.ID,">Serviced</button></td>"):"";return"<tr>".concat(o).concat(u,"</tr>")}function c(e,t){$("#notifications-wrapper").append(function(e,t){return'<div class="alert alert-'.concat(e,' alert-dismissible fade show" role="alert">').concat(t).concat('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',"</div>")}(e,t))}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}))},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1);Object(i.c)(),$("#dropdownMenu").focus(),$(".js-specialists-dropdown").click((function(e){e.preventDefault();var t=parseInt(e.currentTarget.dataset.value,10);Object(r.a)(t),Object(i.a)("success","Užregistruota sėkmingai")})),$("#load-data").click((function(){$.when(Object(r.e)("./data/service.json","line-data"),Object(r.e)("./data/clients.json","line-clients"),Object(r.e)("./data/specialists.json","line-specialists")).then((function(){Object(i.a)("success","Sėkmingai nuskaityti lankytojų duomenys"),Object(i.c)(),Object(r.g)()}),(function(){Object(i.a)("danger","Nepavyko nuskaityti lankytojų duomenų")}))}))}]);